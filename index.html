<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>êµ¬ë¡€ì¤‘í•™êµ í•™ì‚¬ë ¥</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Pretendard:wght@400;600;700&display=swap');
        body { font-family: 'Pretendard', sans-serif; text-align: center; }
        .calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); text-align: left; }
        .day-cell { min-height: 100px; border: 1px solid #e5e7eb; }
        input, select, button { text-align: center; }
        @media (max-width: 640px) {
            .day-cell { min-height: 70px; font-size: 0.7rem; }
            .mobile-hide { display: none; }
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <nav class="bg-blue-900 text-white p-4 shadow-lg sticky top-0 z-50">
        <div class="container mx-auto flex justify-between items-center">
            <h1 class="text-xl font-bold cursor-pointer" onclick="location.reload()">ğŸ« êµ¬ë¡€ì¤‘í•™êµ í•™ì‚¬ë ¥</h1>
            <div class="flex gap-1">
                <button onclick="changeView('yearly')" class="px-3 py-1.5 bg-blue-700 hover:bg-blue-800 rounded text-sm transition font-bold">1ë…„</button>
                <button onclick="changeView('monthly')" class="px-3 py-1.5 bg-blue-700 hover:bg-blue-800 rounded text-sm transition font-bold">ì›”ê°„</button>
                <button onclick="changeView('weekly')" class="px-3 py-1.5 bg-blue-700 hover:bg-blue-800 rounded text-sm transition font-bold">ì£¼ê°„</button>
            </div>
        </div>
    </nav>

    <main class="container mx-auto p-2 md:p-4 max-w-6xl">
        <section class="bg-white p-4 rounded-xl shadow-sm border mb-4">
            <h2 class="font-bold mb-4 text-blue-900">ğŸ“ í•™ì‚¬ ì¼ì • ë“±ë¡</h2>
            <div class="flex flex-col md:flex-row justify-center items-center gap-2">
                <input type="date" id="eventDate" class="w-full md:w-auto border p-2 rounded text-sm outline-none focus:ring-1 focus:ring-blue-500">
                <input type="text" id="eventTitle" placeholder="í–‰ì‚¬ ë‚´ìš© ì…ë ¥" class="w-full md:w-64 border p-2 rounded text-sm outline-none focus:ring-1 focus:ring-blue-500">
                <select id="eventDept" class="w-full md:w-auto border p-2 rounded text-sm outline-none focus:ring-1 focus:ring-blue-500">
                    <option value="">ë¶€ì„œ ì„ íƒ</option>
                    <option value="êµë¬´ë¶€">êµë¬´ë¶€</option>
                    <option value="ì—°êµ¬ë¶€">ì—°êµ¬ë¶€</option>
                    <option value="í•™ìƒë¶€">í•™ìƒë¶€</option>
                    <option value="ì°½ì˜ì¸ì„±ë¶€">ì°½ì˜ì¸ì„±ë¶€</option>
                    <option value="êµê°">êµê°</option>
                    <option value="êµì¥">êµì¥</option>
                    <option value="ê¸°íƒ€">ê¸°íƒ€</option>
                </select>
                <button onclick="addEvent()" class="w-full md:w-32 bg-blue-600 text-white p-2 rounded hover:bg-blue-700 font-bold text-sm transition">ì¼ì • ì €ì¥</button>
            </div>
            <p class="text-[10px] text-gray-400 mt-2">* ë¶€ì„œëŠ” ì„ íƒ ì‹œ ìœ ì§€ë©ë‹ˆë‹¤.</p>
        </section>

        <div class="flex items-center justify-center gap-4 mb-4 bg-white py-3 rounded-lg shadow-sm border">
            <button onclick="moveTime(-1)" class="text-xl font-bold text-blue-600">â—€</button>
            <div id="viewTitle" class="text-base md:text-xl font-bold text-gray-800 text-center min-w-[250px]"></div>
            <button onclick="moveTime(1)" class="text-xl font-bold text-blue-600">â–¶</button>
        </div>

        <div id="contentDisplay" class="bg-white p-2 md:p-4 rounded-xl shadow-md min-h-[400px]">
            <div id="renderTarget" class="w-full"></div>
        </div>
    </main>

    <script>
        let events = JSON.parse(localStorage.getItem('gureMS_Events')) || [];
        let currentView = 'monthly';
        let viewDate = new Date();

        function saveEvents() {
            localStorage.setItem('gureMS_Events', JSON.stringify(events));
            render();
        }

        function addEvent() {
            const date = document.getElementById('eventDate').value;
            const dept = document.getElementById('eventDept').value;
            const title = document.getElementById('eventTitle').value;

            if(!date || !title || !dept) return alert("ë‚ ì§œ, ë‚´ìš©, ë¶€ì„œë¥¼ ëª¨ë‘ í™•ì¸í•´ì£¼ì„¸ìš”!");

            events.push({ id: Date.now(), date, dept, title });
            saveEvents();
            
            document.getElementById('eventTitle').value = '';
            document.getElementById('eventTitle').focus();
        }

        function deleteEvent(id) {
            if(confirm("ì´ ì¼ì •ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
                events = events.filter(e => e.id !== id);
                saveEvents();
            }
        }

        function moveTime(offset) {
            if (currentView === 'yearly') {
                viewDate.setFullYear(viewDate.getFullYear() + offset);
            } else if (currentView === 'monthly') {
                viewDate.setMonth(viewDate.getMonth() + offset);
            } else if (currentView === 'weekly') {
                viewDate.setDate(viewDate.getDate() + (offset * 7));
            }
            render();
        }

        function changeView(view) {
            currentView = view;
            render();
        }

        // ì£¼ê°„ ë²”ìœ„ ê³„ì‚° ì•ˆì „ ë¡œì§
        function getWeekRange(date) {
            let d = new Date(date);
            let day = d.getDay();
            let diff = d.getDate() - day + (day === 0 ? -6 : 1); // ì›”ìš”ì¼ ì°¾ê¸°
            
            let monday = new Date(d.setDate(diff));
            let friday = new Date(new Date(monday).setDate(monday.getDate() + 4));

            const fmt = (target) => `${target.getMonth() + 1}.${target.getDate()}.(${['ì¼','ì›”','í™”','ìˆ˜','ëª©','ê¸ˆ','í† '][target.getDay()]})`;
            
            return {
                text: `${fmt(monday)} - ${fmt(friday)}`,
                start: monday.toISOString().split('T')[0],
                end: friday.toISOString().split('T')[0]
            };
        }

        function render() {
            const container = document.getElementById('
