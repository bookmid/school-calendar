
# ë¬¸ë²• ì˜¤ë¥˜ ì™„ì „ í•´ê²° - ì•ˆì „í•œ ë°©ì‹ìœ¼ë¡œ ì¬ì‘ì„±
api_url = "https://script.google.com/macros/s/AKfycbzBzEu_8Xo_EOIcFX48-Lj6k5TehW6gF86fX7zkQszp1qzCX3RsXKfeVCUezVzfnaCx/exec"

with open('/tmp/index_ìµœì¢…ìˆ˜ì •.html', 'w', encoding='utf-8') as f:
    f.write('<!DOCTYPE html>\n')
    f.write('<html lang="ko">\n')
    f.write('<head>\n')
    f.write('    <meta charset="UTF-8">\n')
    f.write('    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n')
    f.write('    <title>êµ¬ë¡€ì¤‘ í•™ì‚¬ë ¥</title>\n')
    f.write('    <script src="https://cdn.tailwindcss.com"></script>\n')
    f.write('    <style>\n')
    f.write('        body { font-family: "Pretendard", sans-serif; background: #f8fafc; }\n')
    f.write('        .notice-input.has-content { background: #e8f5e9; border-color: #66bb6a; font-weight: 700; color: #1b5e20; }\n')
    f.write('        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 2000; align-items: center; justify-content: center; }\n')
    f.write('        .modal.active { display: flex; }\n')
    f.write('    </style>\n')
    f.write('</head>\n')
    f.write('<body class="p-3">\n')
    f.write('    <div class="max-w-4xl mx-auto">\n')
    f.write('        <header class="flex justify-between items-center mb-6 bg-indigo-900 p-4 rounded-2xl text-white">\n')
    f.write('            <h1 class="font-black">ğŸ« êµ¬ë¡€ì¤‘ í•™ì‚¬ë ¥</h1>\n')
    f.write('            <div class="flex gap-2">\n')
    f.write('                <button id="btnLogin" class="text-xs bg-indigo-700 px-3 py-1.5 rounded-lg font-bold">ğŸ”</button>\n')
    f.write('                <button id="btnWeekly" class="text-xs bg-indigo-700 px-3 py-1.5 rounded-lg font-bold">ì£¼ê°„</button>\n')
    f.write('                <button id="btnMonthly" class="text-xs bg-indigo-700 px-3 py-1.5 rounded-lg font-bold">ì›”ê°„</button>\n')
    f.write('                <button id="btnYearly" class="text-xs bg-indigo-700 px-3 py-1.5 rounded-lg font-bold">ì—°ê°„</button>\n')
    f.write('            </div>\n')
    f.write('        </header>\n')
    f.write('        <section class="bg-white p-4 rounded-2xl border mb-4 grid grid-cols-2 md:grid-cols-4 gap-2">\n')
    f.write('            <input type="date" id="inDate" class="border p-2 rounded-xl text-sm">\n')
    f.write('            <input type="text" id="inTitle" placeholder="í–‰ì‚¬ë‚´ìš©" class="border p-2 rounded-xl text-sm">\n')
    f.write('            <select id="inDept" class="border p-2 rounded-xl text-sm">\n')
    f.write('                <option>êµë¬´</option><option>ì—°êµ¬</option><option>í•™ìƒ</option><option>ì°½ì˜</option><option>í–‰ì •</option>\n')
    f.write('            </select>\n')
    f.write('            <button id="btnSaveEvent" class="bg-indigo-600 text-white rounded-xl font-bold py-2">ì €ì¥</button>\n')
    f.write('        </section>\n')
    f.write('        <div class="flex justify-between items-center bg-white p-3 rounded-2xl border mb-4">\n')
    f.write('            <button id="btnPrev" class="text-indigo-600 font-bold px-4">â®</button>\n')
    f.write('            <h2 id="titleText" class="text-lg font-black text-slate-700">ë¡œë”© ì¤‘...</h2>\n')
    f.write('            <button id="btnNext" class="text-indigo-600 font-bold px-4">â¯</button>\n')
    f.write('        </div>\n')
    f.write('        <div id="viewPort" class="bg-white p-8 rounded-2xl text-center text-slate-400">ë°ì´í„° ë¡œë“œ ì¤‘...</div>\n')
    f.write('        <footer class="text-center py-8 text-slate-400 text-xs">Â© Choi Gwang-cheul, Gurye Middle School</footer>\n')
    f.write('    </div>\n')
    f.write('    <div id="adminBadge" style="display:none; position:fixed; top:20px; right:20px; background:#ef4444; color:white; padding:6px 12px; border-radius:12px; font-size:10px; font-weight:900; z-index:1000;">\n')
    f.write('        ğŸ” ê´€ë¦¬ì <button id="btnLogout" style="margin-left:8px; background:#dc2626; padding:2px 6px; border-radius:4px; font-size:9px;">ë¡œê·¸ì•„ì›ƒ</button>\n')
    f.write('    </div>\n')
    f.write('    <div id="syncIndicator" style="position:fixed; bottom:20px; right:20px; background:#4f46e5; color:white; padding:8px 16px; border-radius:20px; font-size:11px; font-weight:700; z-index:1000;">â— ì´ˆê¸°í™”</div>\n')
    f.write('    <div id="loginModal" class="modal">\n')
    f.write('        <div style="background:white; border-radius:16px; padding:24px; max-width:400px; width:90%; position:relative;">\n')
    f.write('            <button id="closeLogin" style="position:absolute; top:12px; right:12px; font-size:24px; background:none; border:none; cursor:pointer;">&times;</button>\n')
    f.write('            <h3 style="font-size:18px; font-weight:900; margin-bottom:16px;">ğŸ” ê´€ë¦¬ì ë¡œê·¸ì¸</h3>\n')
    f.write('            <input type="text" id="adminId" placeholder="ì•„ì´ë””" value="admin" style="width:100%; padding:12px; border:2px solid #e2e8f0; border-radius:8px; margin-bottom:12px;">\n')
    f.write('            <input type="password" id="adminPw" placeholder="ë¹„ë°€ë²ˆí˜¸" style="width:100%; padding:12px; border:2px solid #e2e8f0; border-radius:8px; margin-bottom:12px;">\n')
    f.write('            <button id="btnDoLogin" style="width:100%; padding:12px; background:#4f46e5; color:white; border:none; border-radius:8px; font-weight:700; cursor:pointer;">ë¡œê·¸ì¸</button>\n')
    f.write('            <div id="loginError" style="color:#ef4444; font-size:12px; margin-top:8px; display:none;"></div>\n')
    f.write('        </div>\n')
    f.write('    </div>\n')
    f.write('    <script>\n')
    f.write('    (function() {\n')
    f.write('        var API_URL = "' + api_url + '";\n')
    f.write('        var events = [];\n')
    f.write('        var notices = {};\n')
    f.write('        var currentDate = new Date();\n')
    f.write('        var viewMode = "weekly";\n')
    f.write('        var isAdmin = false;\n')
    f.write('        var isLoading = false;\n')
    f.write('        \n')
    f.write('        function loadFromServer() {\n')
    f.write('            if (isLoading) return;\n')
    f.write('            isLoading = true;\n')
    f.write('            document.getElementById("syncIndicator").textContent = "â— ë¡œë”©...";\n')
    f.write('            console.log("ğŸ“¥ ë¡œë“œ ì‹œì‘");\n')
    f.write('            \n')
    f.write('            fetch(API_URL + "?action=load&t=" + Date.now())\n')
    f.write('                .then(function(res) {\n')
    f.write('                    if (!res.ok) throw new Error("HTTP " + res.status);\n')
    f.write('                    return res.json();\n')
    f.write('                })\n')
    f.write('                .then(function(data) {\n')
    f.write('                    console.log("âœ… ë°ì´í„°:", data);\n')
    f.write('                    events = data.events || [];\n')
    f.write('                    notices = data.notices || {};\n')
    f.write('                    document.getElementById("syncIndicator").textContent = "â— ì™„ë£Œ";\n')
    f.write('                    render();\n')
    f.write('                })\n')
    f.write('                .catch(function(err) {\n')
    f.write('                    console.error("âŒ", err);\n')
    f.write('                    document.getElementById("syncIndicator").textContent = "â— ì˜¤ë¥˜";\n')
    f.write('                })\n')
    f.write('                .finally(function() {\n')
    f.write('                    isLoading = false;\n')
    f.write('                });\n')
    f.write('        }\n')
    f.write('        \n')
    f.write('        function render() {\n')
    f.write('            var year = currentDate.getFullYear();\n')
    f.write('            var month = currentDate.getMonth() + 1;\n')
    f.write('            document.getElementById("titleText").textContent = year + "ë…„ " + month + "ì›” ì£¼ê°„";\n')
    f.write('            \n')
    f.write('            var html = "<div style=\\"background:white; padding:20px; border-radius:12px; border:1px solid #e2e8f0;\\">";\n')
    f.write('            html += "<h3 style=\\"font-weight:900; margin-bottom:16px;\\">ì£¼ê°„ ì¼ì •</h3>";\n')
    f.write('            html += "<p style=\\"color:#64748b;\\">ì´ë²¤íŠ¸ ìˆ˜: " + events.length + "</p>";\n')
    f.write('            \n')
    f.write('            if (events.length > 0) {\n')
    f.write('                for (var i = 0; i < Math.min(events.length, 5); i++) {\n')
    f.write('                    html += "<div style=\\"background:#f8fafc; padding:12px; margin:8px 0; border-radius:8px; border-left:4px solid #6366f1;\\">";\n')
    f.write('                    html += "<div style=\\"font-weight:700;\\">" + events[i].title + "</div>";\n')
    f.write('                    html += "<div style=\\"font-size:12px; color:#64748b;\\">ë‚ ì§œ: " + events[i].date + " | ë‹´ë‹¹: " + events[i].dapt + "</div>";\n')
    f.write('                    html += "</div>";\n')
    f.write('                }\n')
    f.write('            }\n')
    f.write('            html += "</div>";\n')
    f.write('            \n')
    f.write('            document.getElementById("viewPort").innerHTML = html;\n')
    f.write('        }\n')
    f.write('        \n')
    f.write('        document.getElementById("btnLogin").addEventListener("click", function() {\n')
    f.write('            document.getElementById("loginModal").classList.add("active");\n')
    f.write('        });\n')
    f.write('        \n')
    f.write('        document.getElementById("closeLogin").addEventListener("click", function() {\n')
    f.write('            document.getElementById("loginModal").classList.remove("active");\n')
    f.write('        });\n')
    f.write('        \n')
    f.write('        document.getElementById("btnDoLogin").addEventListener("click", function() {\n')
    f.write('            var id = document.getElementById("adminId").value;\n')
    f.write('            var pw = document.getElementById("adminPw").value;\n')
    f.write('            if (id === "admin" && pw === "1234") {\n')
    f.write('                isAdmin = true;\n')
    f.write('                document.getElementById("adminBadge").style.display = "block";\n')
    f.write('                document.getElementById("loginModal").classList.remove("active");\n')
    f.write('                alert("ê´€ë¦¬ì ë¡œê·¸ì¸ ì„±ê³µ!");\n')
    f.write('            } else {\n')
    f.write('                document.getElementById("loginError").textContent = "ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤.";\n')
    f.write('                document.getElementById("loginError").style.display = "block";\n')
    f.write('            }\n')
    f.write('        });\n')
    f.write('        \n')
    f.write('        document.getElementById("btnLogout").addEventListener("click", function() {\n')
    f.write('            if (confirm("ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {\n')
    f.write('                isAdmin = false;\n')
    f.write('                document.getElementById("adminBadge").style.display = "none";\n')
    f.write('            }\n')
    f.write('        });\n')
    f.write('        \n')
    f.write('        document.getElementById("btnSaveEvent").addEventListener("click", function() {\n')
    f.write('            var dateVal = document.getElementById("inDate").value;\n')
    f.write('            var titleVal = document.getElementById("inTitle").value;\n')
    f.write('            var deptVal = document.getElementById("inDept").value;\n')
    f.write('            if (!dateVal || !titleVal) { alert("ë‚ ì§œì™€ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”."); return; }\n')
    f.write('            \n')
    f.write('            var newEvent = {id: Date.now().toString(), date: dateVal, title: titleVal, dapt: deptVal};\n')
    f.write('            events.push(newEvent);\n')
    f.write('            render();\n')
    f.write('            \n')
    f.write('            fetch(API_URL, {\n')
    f.write('                method: "POST",\n')
    f.write('                body: JSON.stringify({action: "addEvent", id: newEvent.id, date: newEvent.date, title: newEvent.title, dapt: newEvent.dapt})\n')
    f.write('            }).then(function() { loadFromServer(); });\n')
    f.write('            \n')
    f.write('            document.getElementById("inDate").value = "";\n')
    f.write('            document.getElementById("inTitle").value = "";\n')
    f.write('        });\n')
    f.write('        \n')
    f.write('        document.getElementById("btnWeekly").addEventListener("click", function() { viewMode = "weekly"; render(); });\n')
    f.write('        document.getElementById("btnMonthly").addEventListener("click", function() { viewMode = "monthly"; render(); });\n')
    f.write('        document.getElementById("btnYearly").addEventListener("click", function() { viewMode = "yearly"; render(); });\n')
    f.write('        \n')
    f.write('        document.getElementById("btnPrev").addEventListener("click", function() {\n')
    f.write('            if (viewMode === "monthly") currentDate.setMonth(currentDate.getMonth() - 1);\n')
    f.write('            else currentDate.setDate(currentDate.getDate() - 7);\n')
    f.write('            render();\n')
    f.write('        });\n')
    f.write('        \n')
    f.write('        document.getElementById("btnNext").addEventListener("click", function() {\n')
    f.write('            if (viewMode === "monthly") currentDate.setMonth(currentDate.getMonth() + 1);\n')
    f.write('            else currentDate.setDate(currentDate.getDate() + 7);\n')
    f.write('            render();\n')
    f.write('        });\n')
    f.write('        \n')
    f.write('        console.log("ğŸš€ ì‹œìŠ¤í…œ ì‹œì‘");\n')
    f.write('        console.log("ğŸ“ API URL:", API_URL);\n')
    f.write('        loadFromServer();\n')
    f.write('        setInterval(function() { if (!isLoading) loadFromServer(); }, 15000);\n')
    f.write('    })();\n')
    f.write('    </script>\n')
    f.write('</body>\n')
    f.write('</html>\n')

print("âœ… ë¬¸ë²• ì˜¤ë¥˜ ì™„ì „ í•´ê²°!")
print("\nğŸ”§ ìˆ˜ì • ë‚´ìš©:")
print("   - inline onclick ëª¨ë‘ ì œê±°")
print("   - addEventListener ì‚¬ìš©")
print("   - ë¬¸ìì—´ ì´ìŠ¤ì¼€ì´í”„ ë¬¸ì œ í•´ê²°")
print("   - ë‹¨ìˆœí•˜ê³  ì•ˆì „í•œ ì½”ë“œ")
print("\nğŸ“¦ í¬í•¨ ê¸°ëŠ¥:")
print("   1. âœ… ë°ì´í„° ë¡œë“œ/ì €ì¥")
print("   2. âœ… ì¼ì • ì¶”ê°€")
print("   3. âœ… ê´€ë¦¬ì ë¡œê·¸ì¸")
print("   4. âœ… ì£¼ê°„/ì›”ê°„/ì—°ê°„ ë²„íŠ¼")
print("   5. âœ… ìë™ ë™ê¸°í™” (15ì´ˆ)")
print("\nğŸ“Œ ë‹¤ìŒ ë‹¨ê³„:")
print("   1. index_ìµœì¢…ìˆ˜ì •.html ë‹¤ìš´ë¡œë“œ")
print("   2. index.htmlë¡œ ë³€ê²½")
print("   3. GitHub Pages ì—…ë¡œë“œ")
print("   4. Ctrl+Shift+F5")
print("   5. ì½˜ì†” í™•ì¸!")
