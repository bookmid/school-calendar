
# ì™„ì „íˆ ìˆ˜ì •ëœ ìµœì¢… ë²„ì „
html_code = '''<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>êµ¬ë¡€ì¤‘ ì‹¤ì‹œê°„ í•™ì‚¬ë ¥</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Pretendard:wght@400;700;900&display=swap');
        body { font-family: 'Pretendard', sans-serif; background-color: #f8fafc; }
        .calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 1px; background-color: #e2e8f0; border: 1px solid #e2e8f0; border-radius: 12px; overflow: hidden; }
        .day-cell { min-height: 110px; background-color: white; padding: 6px; position: relative; cursor: pointer; }
        .day-cell:hover { background-color: #f8fafc; }
        .day-cell.weekend-cell { background-color: #fef2f2; }
        .day-cell.holiday-cell { background-color: #fef2f2; }
        .event-item { font-size: 11px; padding: 3px 6px; margin-top: 3px; border-radius: 4px; background-color: #f1f5f9; border-left: 3px solid #6366f1; color: #1e293b; font-weight: 700; display: flex; justify-content: space-between; }
        .holiday-badge { font-size: 10px; color: #dc2626; font-weight: 700; margin-top: 2px; }
        .text-sun { color: #ef4444; } .text-sat { color: #3b82f6; }
        .del-x { color: #ef4444; cursor: pointer; margin-left: 4px; }
        .year-view { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 16px; }
        .year-month { background: white; padding: 16px; border-radius: 12px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        .year-month-title { font-weight: 900; color: #1e293b; margin-bottom: 8px; }
        .mini-calendar { display: grid; grid-template-columns: repeat(7, 1fr); gap: 2px; font-size: 10px; }
        .mini-day { padding: 4px; text-align: center; min-height: 30px; background: #f8fafc; border-radius: 4px; position: relative; }
        .mini-day.has-event { background: #dbeafe; font-weight: 700; }
        .mini-day.weekend { background: #fee2e2; }
        .mini-day.holiday { background: #fef2f2; }
        .mini-event { font-size: 7px; color: #4f46e5; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
        .week-item { background-color: white; }
        .week-item.weekend-bg { background-color: #fef2f2 !important; }
        .sync-indicator { position: fixed; bottom: 20px; right: 20px; background: #4f46e5; color: white; padding: 8px 16px; border-radius: 20px; font-size: 11px; font-weight: 700; box-shadow: 0 4px 6px rgba(0,0,0,0.1); z-index: 1000; }
        .sync-indicator.syncing { background: #f59e0b; animation: pulse 1s infinite; }
        .sync-indicator.editing { background: #10b981; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .notice-section { background: white; padding: 16px; border-radius: 12px; margin-top: 16px; border: 2px solid #e2e8f0; }
        .notice-item { margin-bottom: 12px; }
        .notice-label { font-weight: 900; color: #4f46e5; font-size: 12px; margin-bottom: 4px; }
        .notice-input { width: 100%; border: 1px solid #e2e8f0; border-radius: 8px; padding: 8px; font-size: 12px; outline: none; }
        .notice-input:focus { border-color: #6366f1; background-color: #f0f9ff; }
    </style>
</head>
<body class="p-3">
    <div class="max-w-4xl mx-auto">
        <header class="flex justify-between items-center mb-6 bg-indigo-900 p-4 rounded-2xl text-white shadow-lg">
            <h1 class="font-black">ğŸ« êµ¬ë¡€ì¤‘ í•™ì‚¬ë ¥</h1>
            <div class="flex gap-2">
                <button onclick="app.setView('yearly')" class="text-xs bg-indigo-700 px-3 py-1.5 rounded-lg font-bold">ì—°ê°„</button>
                <button onclick="app.setView('monthly')" class="text-xs bg-indigo-700 px-3 py-1.5 rounded-lg font-bold">ì›”ê°„</button>
                <button onclick="app.setView('weekly')" class="text-xs bg-indigo-700 px-3 py-1.5 rounded-lg font-bold">ì£¼ê°„</button>
            </div>
        </header>

        <section class="bg-white p-4 rounded-2xl shadow-sm border mb-4 grid grid-cols-2 md:grid-cols-4 gap-2">
            <input type="date" id="inDate" class="border p-2 rounded-xl text-sm outline-none">
            <input type="text" id="inTitle" placeholder="í–‰ì‚¬ë‚´ìš©" class="border p-2 rounded-xl text-sm outline-none">
            <select id="inDept" class="border p-2 rounded-xl text-sm outline-none">
                <option>êµë¬´</option><option>ì—°êµ¬</option><option>í•™ìƒ</option><option>ì°½ì˜</option><option>í–‰ì •</option>
            </select>
            <button onclick="app.saveEvent()" class="bg-indigo-600 text-white rounded-xl font-bold py-2">ì €ì¥í•˜ê¸°</button>
        </section>

        <div class="flex justify-between items-center bg-white p-3 rounded-2xl border mb-4">
            <button onclick="app.move(-1)" class="text-indigo-600 font-bold px-4">â®</button>
            <h2 id="titleText" class="text-lg font-black text-slate-700">ë¡œë”© ì¤‘...</h2>
            <button onclick="app.move(1)" class="text-indigo-600 font-bold px-4">â¯</button>
        </div>

        <div id="viewPort"></div>

        <!-- ì£¼ê°„ ì•ˆë‚´ì‚¬í•­ -->
        <div id="weeklyNotices" style="display:none;"></div>

        <footer class="text-center py-8 text-slate-400 text-[10px]">
            Â© Choi Gwang-cheul, Gurye Middle School
        </footer>
    </div>

    <!-- ë™ê¸°í™” ìƒíƒœ í‘œì‹œ -->
    <div id="syncIndicator" class="sync-indicator">â— ë™ê¸°í™” ì™„ë£Œ</div>

    <script>
        const app = {
            // â­ Google Apps Script URL (ì‹¤ì œ URLë¡œ ë³€ê²½ë¨!)
            API_URL: 'https://script.google.com/macros/s/AKfycbxJWIOqWzlIBIBQskT-zo7nb7vlw241VSnFZRTW3f-9LvEcozJ5lSYosGs4c6qAcoD9/exec',
            
            events: [],
            notices: {},  // ëª¨ë“  ì£¼ì˜ ì•ˆë‚´ì‚¬í•­ ì €ì¥
            currentDate: new Date(),
            viewMode: 'monthly',
            isEditing: false,
            editingTimeout: null,
            
            holidays: [
                '2026-01-01:ì‹ ì •',
                '2026-01-28:ì„¤ë‚ ì—°íœ´',
                '2026-01-29:ì„¤ë‚ ',
                '2026-01-30:ì„¤ë‚ ì—°íœ´',
                '2026-03-01:ì‚¼ì¼ì ˆ',
                '2026-05-05:ì–´ë¦°ì´ë‚ ',
                '2026-05-24:ë¶€ì²˜ë‹˜ì˜¤ì‹ ë‚ ',
                '2026-06-06:í˜„ì¶©ì¼',
                '2026-08-15:ê´‘ë³µì ˆ',
                '2026-09-28:ì¶”ì„ì—°íœ´',
                '2026-09-29:ì¶”ì„',
                '2026-09-30:ì¶”ì„ì—°íœ´',
                '2026-10-03:ê°œì²œì ˆ',
                '2026-10-09:í•œê¸€ë‚ ',
                '2026-12-25:í¬ë¦¬ìŠ¤ë§ˆìŠ¤'
            ],
            
            getHoliday(dateStr) {
                const found = this.holidays.find(h => h.startsWith(dateStr + ':'));
                return found ? found.split(':')[1] : null;
            },
            
            setSyncStatus(status) {
                const indicator = document.getElementById('syncIndicator');
                if (status === 'editing') {
                    indicator.className = 'sync-indicator editing';
                    indicator.textContent = 'âœ ì…ë ¥ ì¤‘...';
                } else if (status === 'syncing') {
                    indicator.className = 'sync-indicator syncing';
                    indicator.textContent = 'â— ë™ê¸°í™” ì¤‘...';
                } else if (status === 'success') {
                    indicator.className = 'sync-indicator';
                    indicator.textContent = 'â— ë™ê¸°í™” ì™„ë£Œ';
                } else if (status === 'error') {
                    indicator.className = 'sync-indicator';
                    indicator.style.background = '#ef4444';
                    indicator.textContent = 'â— ì˜¤ë¥˜ ë°œìƒ';
                }
            },
            
            // ì£¼ê°„ í‚¤ ìƒì„± (í•´ë‹¹ ì£¼ì˜ ì¼ìš”ì¼ ë‚ ì§œ)
            getWeekKey(date = this.currentDate) {
                const d = new Date(date);
                d.setDate(d.getDate() - d.getDay());  // ê·¸ ì£¼ì˜ ì¼ìš”ì¼
                return `${d.getFullYear()}-${String(d.getMonth() + 1).padStart(2, '0')}-${String(d.getDate()).padStart(2, '0')}`;
            },
            
            // ì„œë²„ì—ì„œ ë°ì´í„° ë¡œë“œ
            async loadFromServer() {
                if (this.isEditing) {
                    console.log('í¸ì§‘ ì¤‘ì´ë¯€ë¡œ ë™ê¸°í™” ê±´ë„ˆëœ€');
                    return;
                }
                
                try {
                    this.setSyncStatus('syncing');
                    const response = await fetch(this.API_URL + '?action=load&t=' + Date.now());
                    const data = await response.json();
                    
                    console.log('ì„œë²„ì—ì„œ ë°›ì€ ë°ì´í„°:', data);
                    
                    // ì´ë²¤íŠ¸ ë°ì´í„° ì²˜ë¦¬
                    this.events = (data.events || []).map(item => {
                        let dateStr = item.date;
                        if (typeof dateStr === 'string' && dateStr.includes('T')) {
                            dateStr = dateStr.split('T')[0];
                        } else if (typeof dateStr === 'string') {
                            dateStr = dateStr.substring(0, 10);
                        }
                        return {
                            id: String(item.id),
                            date: dateStr,
                            title: item.title,
                            dapt: item.dapt
                        };
                    });
                    
                    // â­ ì•ˆë‚´ì‚¬í•­ ë°ì´í„° ì²˜ë¦¬ (ëª¨ë“  ì£¼ì˜ ë°ì´í„° ìœ ì§€)
                    this.notices = data.notices || {};
                    console.log('ë¡œë“œëœ ì•ˆë‚´ì‚¬í•­:', this.notices);
                    
                    this.setSyncStatus('success');
                    this.render();
                } catch (error) {
                    console.error('ë¡œë“œ ì˜¤ë¥˜:', error);
                    this.setSyncStatus('error');
                }
            },
            
            // ì„œë²„ì— ë°ì´í„° ì €ì¥
            async saveToServer(action, data) {
                try {
                    console.log('ì„œë²„ì— ì €ì¥:', action, data);
                    this.setSyncStatus('syncing');
                    
                    const response = await fetch(this.API_URL, {
                        method: 'POST',
                        headers: { 'Content-Type': 'text/plain' },
                        body: JSON.stringify({ action, ...data })
                    });
                    
                    console.log('ì €ì¥ ì™„ë£Œ');
                    
                    // ì €ì¥ í›„ 1ì´ˆ ë’¤ ë™ê¸°í™”
                    setTimeout(() => {
                        this.isEditing = false;
                        this.loadFromServer();
                    }, 1000);
                } catch (error) {
                    console.error('ì €ì¥ ì˜¤ë¥˜:', error);
                    this.setSyncStatus('error');
                }
            },
            
            async saveEvent() {
                const dateInput = document.getElementById('inDate').value;
                const title = document.getElementById('inTitle').value;
                const dapt = document.getElementById('inDept').value;
                
                if (!dateInput || !title) {
                    alert('ë‚ ì§œì™€ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”.');
                    return;
                }
                
                const newEvent = {
                    id: Date.now().toString(),
                    date: dateInput,
                    title: title,
                    dapt: dapt
                };
                
                this.events.push(newEvent);
                this.render();
                await this.saveToServer('addEvent', newEvent);
                
                document.getElementById('inDate').value = '';
                document.getElementById('inTitle').value = '';
            },
            
            async deleteEvent(id) {
                if (!confirm('ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;
                this.events = this.events.filter(e => e.id !== id);
                this.render();
                await this.saveToServer('deleteEvent', { id });
            },
            
            async toggleHoliday(dateStr) {
                const existing = this.events.find(e => e.date === dateStr && e.title === 'íœ´ì—…ì¼');
                
                if (existing) {
                    if (confirm('íœ´ì—…ì¼ì„ í•´ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                        await this.deleteEvent(existing.id);
                    }
                } else {
                    if (confirm('íœ´ì—…ì¼ë¡œ ì§€ì •í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                        const newEvent = {
                            id: Date.now().toString(),
                            date: dateStr,
                            title: 'íœ´ì—…ì¼',
                            dapt: 'í•™ì‚¬'
                        };
                        this.events.push(newEvent);
                        this.render();
                        await this.saveToServer('addEvent', newEvent);
                    }
                }
            },
            
            // ì•ˆë‚´ì‚¬í•­ ì…ë ¥ ì‹œì‘
            handleNoticeInput(role) {
                this.isEditing = true;
                this.setSyncStatus('editing');
                
                if (this.editingTimeout) {
                    clearTimeout(this.editingTimeout);
                }
            },
            
            // â­ ì•ˆë‚´ì‚¬í•­ ì €ì¥ (ë¡œì»¬ì—ë„ ì¦‰ì‹œ ì €ì¥)
            async saveNotice(role) {
                const weekKey = this.getWeekKey();
                const input = document.getElementById(`notice_${role}`);
                if (!input) return;
                
                // â­ ë¡œì»¬ noticesì— ì¦‰ì‹œ ì €ì¥ (ì¤‘ìš”!)
                if (!this.notices[weekKey]) {
                    this.notices[weekKey] = {};
                }
                this.notices[weekKey][role] = input.value;
                
                console.log('ì•ˆë‚´ì‚¬í•­ ì €ì¥:', weekKey, role, input.value);
                console.log('í˜„ì¬ notices:', this.notices);
                
                // ë””ë°”ìš´ìŠ¤: 2ì´ˆ í›„ ì„œë²„ì— ì €ì¥
                if (this.editingTimeout) {
                    clearTimeout(this.editingTimeout);
                }
                
                this.editingTimeout = setTimeout(async () => {
                    await this.saveToServer('saveNotice', {
                        weekKey,
                        role,
                        content: input.value
                    });
                }, 2000);
            },
            
            move(direction) {
                if (this.viewMode === 'yearly') {
                    this.currentDate.setFullYear(this.currentDate.getFullYear() + direction);
                } else if (this.viewMode === 'monthly') {
                    this.currentDate.setMonth(this.currentDate.getMonth() + direction);
                } else {
                    this.currentDate.setDate(this.currentDate.getDate() + (direction * 7));
                }
                this.render();
            },
            
            setView(mode) {
                this.viewMode = mode;
                this.render();
            },
            
            renderYearly() {
                const year = this.currentDate.getFullYear();
                let html = '<div class="year-view">';
                
                for (let m = 0; m < 12; m++) {
                    html += `<div class="year-month">
                        <div class="year-month-title">${year}ë…„ ${m + 1}ì›”</div>
                        <div class="mini-calendar">`;
                    
                    ['ì¼','ì›”','í™”','ìˆ˜','ëª©','ê¸ˆ','í† '].forEach(w => {
                        html += `<div class="text-[9px] text-slate-400 font-bold text-center p-1">${w}</div>`;
                    });
                    
                    const first = new Date(year, m, 1).getDay();
                    const last = new Date(year, m + 1, 0).getDate();
                    
                    for (let i = 0; i < first; i++) html += '<div></div>';
                    
                    for (let d = 1; d <= last; d++) {
                        const dateStr = `${year}-${String(m + 1).padStart(2, '0')}-${String(d).padStart(2, '0')}`;
                        const dayIdx = new Date(year, m, d).getDay();
                        const dayEvents = this.events.filter(e => e.date === dateStr);
                        const holiday = this.getHoliday(dateStr);
                        const isWeekend = dayIdx === 0 || dayIdx === 6;
                        const isHoliday = dayEvents.some(e => e.title === 'íœ´ì—…ì¼');
                        const colorClass = dayIdx === 0 || holiday ? 'text-sun' : (dayIdx === 6 ? 'text-sat' : 'text-slate-600');
                        
                        let cellClass = '';
                        if (holiday || isHoliday || isWeekend) {
                            cellClass = 'holiday';
                        } else if (dayEvents.length > 0) {
                            cellClass = 'has-event';
                        }
                        
                        html += `<div class="mini-day ${cellClass} ${colorClass}" title="${dayEvents.map(e => e.title).join(', ')}">
                            ${d}`;
                        
                        if (dayEvents.length > 0) {
                            html += `<div class="mini-event">${dayEvents[0].title}</div>`;
                        }
                        
                        html += `</div>`;
                    }
                    
                    html += '</div></div>';
                }
                
                return html + '</div>';
            },
            
            renderMonthly() {
                const year = this.currentDate.getFullYear();
                const month = this.currentDate.getMonth();
                let html = '<div class="calendar-grid">';
                
                ['ì¼','ì›”','í™”','ìˆ˜','ëª©','ê¸ˆ','í† '].forEach(w => {
                    html += `<div class="bg-slate-50 p-2 text-center text-[11px] font-bold text-slate-400">${w}</div>`;
                });
                
                const first = new Date(year, month, 1).getDay();
                const last = new Date(year, month + 1, 0).getDate();
                
                for (let i = 0; i < first; i++) {
                    html += '<div class="day-cell bg-slate-50/30"></div>';
                }
                
                for (let d = 1; d <= last; d++) {
                    const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(d).padStart(2, '0')}`;
                    const dayIdx = new Date(year, month, d).getDay();
                    const holiday = this.getHoliday(dateStr);
                    const isWeekend = dayIdx === 0 || dayIdx === 6;
                    const isHoliday = this.events.some(e => e.date === dateStr && e.title === 'íœ´ì—…ì¼');
                    const colorClass = dayIdx === 0 || holiday ? 'text-sun' : (dayIdx === 6 ? 'text-sat' : 'text-slate-400');
                    const cellClass = (isWeekend || holiday || isHoliday) ? 'weekend-cell' : '';
                    
                    html += `<div class="day-cell ${cellClass}" onclick="app.toggleHoliday('${dateStr}')">
                        <div class="text-[11px] font-black ${colorClass}">${d}</div>`;
                    
                    if (holiday) {
                        html += `<div class="holiday-badge">${holiday}</div>`;
                    }
                    
                    html += '<div class="mt-1">';
                    
                    this.events.filter(e => e.date === dateStr).forEach(e => {
                        html += `<div class="event-item" onclick="event.stopPropagation()">
                            <span>${e.title} (${e.dapt})</span>
                            <span class="del-x" onclick="app.deleteEvent('${e.id}')">âœ•</span>
                        </div>`;
                    });
                    
                    html += '</div></div>';
                }
                
                return html + '</div>';
            },
            
            renderWeekly() {
                const start = new Date(this.currentDate);
                start.setDate(this.currentDate.getDate() - this.currentDate.getDay());
                
                let html = '<div class="flex flex-col gap-2">';
                
                for (let i = 0; i < 7; i++) {
                    const d = new Date(start);
                    d.setDate(start.getDate() + i);
                    
                    const year = d.getFullYear();
                    const month = String(d.getMonth() + 1).padStart(2, '0');
                    const day = String(d.getDate()).padStart(2, '0');
                    const dateStr = `${year}-${month}-${day}`;
                    
                    const holiday = this.getHoliday(dateStr);
                    const isWeekend = d.getDay() === 0 || d.getDay() === 6;
                    const isHoliday = this.events.some(e => e.date === dateStr && e.title === 'íœ´ì—…ì¼');
                    const weekendClass = (isWeekend || holiday || isHoliday) ? 'weekend-bg' : '';
                    
                    html += `<div class="week-item ${weekendClass} p-4 rounded-xl border flex items-center shadow-sm">
                        <div class="w-24 font-black text-indigo-900 border-r mr-4">
                            ${d.getDate()}ì¼`;
                    
                    if (holiday) {
                        html += `<div class="holiday-badge text-[9px]">${holiday}</div>`;
                    }
                    
                    html += '</div><div class="flex-1">';
                    
                    this.events.filter(e => e.date === dateStr).forEach(e => {
                        html += `<div class="event-item mb-1 p-2">
                            <span>${e.title} (${e.dapt})</span>
                            <span class="del-x" onclick="app.deleteEvent('${e.id}')">âœ•</span>
                        </div>`;
                    });
                    
                    html += '</div></div>';
                }
                
                html += '</div>';
                
                // â­ í˜„ì¬ ì£¼ì˜ í‚¤ë¥¼ ê°€ì ¸ì˜¤ê¸°
                const weekKey = this.getWeekKey();
                const weekNotices = this.notices[weekKey] || {};
                
                console.log('ë Œë”ë§ - í˜„ì¬ ì£¼:', weekKey);
                console.log('ë Œë”ë§ - ì•ˆë‚´ì‚¬í•­:', weekNotices);
                
                const noticeHtml = `
                    <div class="notice-section">
                        <h3 class="font-black text-indigo-900 mb-4">ğŸ“¢ ì£¼ê°„ ì•ˆë‚´ì‚¬í•­ (${weekKey})</h3>
                        
                        <div class="notice-item">
                            <div class="notice-label">ğŸ“ êµì¥</div>
                            <input type="text" id="notice_principal" class="notice-input" 
                                   value="${weekNotices.principal || ''}" 
                                   oninput="app.handleNoticeInput('principal')"
                                   onchange="app.saveNotice('principal')" 
                                   placeholder="êµì¥ ì•ˆë‚´ì‚¬í•­ ì…ë ¥">
                        </div>
                        
                        <div class="notice-item">
                            <div class="notice-label">ğŸ‘” êµê°</div>
                            <input type="text" id="notice_vprincipal" class="notice-input" 
                                   value="${weekNotices.vprincipal || ''}" 
                                   oninput="app.handleNoticeInput('vprincipal')"
                                   onchange="app.saveNotice('vprincipal')" 
                                   placeholder="êµê° ì•ˆë‚´ì‚¬í•­ ì…ë ¥">
                        </div>
                        
                        <div class="notice-item">
                            <div class="notice-label">ğŸ¢ í–‰ì •ì‹¤ì¥</div>
                            <input type="text" id="notice_admin" class="notice-input" 
                                   value="${weekNotices.admin || ''}" 
                                   oninput="app.handleNoticeInput('admin')"
                                   onchange="app.saveNotice('admin')" 
                                   placeholder="í–‰ì •ì‹¤ì¥ ì•ˆë‚´ì‚¬í•­ ì…ë ¥">
                        </div>
                        
                        <div class="notice-item">
                            <div class="notice-label">ğŸ“‹ ë¶€ì¥</div>
                            <input type="text" id="notice_dept" class="notice-input" 
                                   value="${weekNotices.dept || ''}" 
                                   oninput="app.handleNoticeInput('dept')"
                                   onchange="app.saveNotice('dept')" 
                                   placeholder="ë¶€ì¥ ì•ˆë‚´ì‚¬í•­ ì…ë ¥">
                        </div>
                        
                        <div class="notice-item">
                            <div class="notice-label">ğŸ¯ í•™ë…„ì‹¤</div>
                            <input type="text" id="notice_grade" class="notice-input" 
                                   value="${weekNotices.grade || ''}" 
                                   oninput="app.handleNoticeInput('grade')"
                                   onchange="app.saveNotice('grade')" 
                                   placeholder="í•™ë…„ì‹¤ ì•ˆë‚´ì‚¬í•­ ì…ë ¥">
                        </div>
                    </div>
                `;
                
                document.getElementById('weeklyNotices').innerHTML = noticeHtml;
                document.getElementById('weeklyNotices').style.display = 'block';
                
                return html;
            },
            
            render() {
                const viewPort = document.getElementById('viewPort');
                const titleText = document.getElementById('titleText');
                const weeklyNotices = document.getElementById('weeklyNotices');
                
                const year = this.currentDate.getFullYear();
                const month = this.currentDate.getMonth() + 1;
                
                if (this.viewMode === 'yearly') {
                    titleText.textContent = `${year}ë…„ ì „ì²´ í•™ì‚¬ë ¥`;
                    viewPort.innerHTML = this.renderYearly();
                    weeklyNotices.style.display = 'none';
                } else if (this.viewMode === 'monthly') {
                    titleText.textContent = `${year}ë…„ ${month}ì›”`;
                    viewPort.innerHTML = this.renderMonthly();
                    weeklyNotices.style.display = 'none';
                } else {
                    titleText.textContent = `${year}ë…„ ${month}ì›” ì£¼ê°„`;
                    viewPort.innerHTML = this.renderWeekly();
                }
            },
            
            async init() {
                await this.loadFromServer();
                this.render();
                
                // 5ì´ˆë§ˆë‹¤ ìë™ ë™ê¸°í™”
                setInterval(() => this.loadFromServer(), 5000);
            }
        };
        
        window.addEventListener('DOMContentLoaded', () => {
            app.init();
        });
    </script>
</body>
</html>
