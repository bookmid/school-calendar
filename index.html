<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>êµ¬ë¡€ì¤‘ ì‹¤ì‹œê°„ í•™ì‚¬ë ¥</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Pretendard:wght@400;700;900&display=swap');
        * { -webkit-tap-highlight-color: transparent; }
        body { font-family: 'Pretendard', sans-serif; background-color: #f8fafc; overflow-x: hidden; }
        .calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 1px; background-color: #e2e8f0; border: 1px solid #e2e8f0; border-radius: 12px; overflow: hidden; }
        .day-cell { min-height: 110px; background-color: white; padding: 6px; position: relative; cursor: pointer; overflow: hidden; }
        .day-cell:hover { background-color: #f8fafc; }
        .day-cell.weekend-cell { background-color: #fef2f2; }
        .day-cell.admin-mode { cursor: crosshair; }
        .event-item { font-size: 11px; padding: 3px 6px; margin-top: 3px; border-radius: 4px; background-color: #f1f5f9; border-left: 3px solid #94a3b8; color: #1e293b; font-weight: 700; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; cursor: pointer; }
        .event-item:hover { background-color: #e2e8f0; }
        .dept-badge { font-weight: 900; margin-left: 4px; white-space: nowrap; }
        .dept-êµë¬´ { color: #3b82f6; }
        .dept-ì—°êµ¬ { color: #8b5cf6; }
        .dept-í•™ìƒ { color: #10b981; }
        .dept-ì°½ì˜ { color: #f59e0b; }
        .dept-í–‰ì • { color: #14b8a6; }
        .holiday-badge { font-size: 10px; color: #dc2626; font-weight: 700; margin-top: 2px; }
        .text-sun { color: #ef4444; } .text-sat { color: #3b82f6; }
        .del-x { color: #ef4444; cursor: pointer; margin-left: 4px; font-weight: bold; opacity: 0.7; }
        .del-x:hover { opacity: 1; }
        .year-view { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 16px; }
        .year-month { background: white; padding: 16px; border-radius: 12px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        .year-month-title { font-weight: 900; color: #1e293b; margin-bottom: 8px; }
        .mini-calendar { display: grid; grid-template-columns: repeat(7, 1fr); gap: 2px; font-size: 10px; }
        .mini-day { padding: 4px; text-align: center; min-height: 30px; background: #f8fafc; border-radius: 4px; position: relative; cursor: pointer; }
        .mini-day.has-event { background: #dbeafe; font-weight: 700; }
        .mini-day.weekend { background: #fee2e2; }
        .mini-day.holiday { background: #fef2f2; }
        .mini-event { font-size: 7px; color: #4f46e5; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
        .week-item { background-color: white; }
        .week-item.weekend-bg { background-color: #fef2f2 !important; }
        .week-day-label { font-size: 10px; color: #64748b; margin-left: 4px; }
        .sync-indicator { position: fixed; bottom: 20px; right: 20px; background: #4f46e5; color: white; padding: 8px 16px; border-radius: 20px; font-size: 11px; font-weight: 700; box-shadow: 0 4px 6px rgba(0,0,0,0.1); z-index: 1000; }
        .sync-indicator.syncing { background: #f59e0b; animation: pulse 1s infinite; }
        .sync-indicator.editing { background: #10b981; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .notice-section { background: white; padding: 16px; border-radius: 12px; margin-top: 16px; border: 2px solid #e2e8f0; }
        .notice-item { margin-bottom: 12px; }
        .notice-label { font-weight: 900; color: #4f46e5; font-size: 12px; margin-bottom: 4px; }
        .notice-input-group { display: flex; gap: 8px; align-items: center; flex-wrap: wrap; }
        .notice-input { flex: 1; min-width: 200px; border: 1px solid #e2e8f0; border-radius: 8px; padding: 8px; font-size: 12px; outline: none; }
        .notice-input:focus { border-color: #6366f1; background-color: #f0f9ff; }
        .notice-input.has-content { background-color: #e8f5e9; border-color: #66bb6a; font-weight: 700; color: #1b5e20; }
        .notice-btn { padding: 6px 12px; border-radius: 6px; font-size: 11px; font-weight: 700; cursor: pointer; transition: all 0.2s; white-space: nowrap; }
        .notice-btn-save { background: #3b82f6; color: white; }
        .notice-btn-save:hover { background: #2563eb; }
        .notice-btn-delete { background: #ef4444; color: white; }
        .notice-btn-delete:hover { background: #dc2626; }
        .admin-badge { position: fixed; top: 20px; right: 20px; background: #ef4444; color: white; padding: 6px 12px; border-radius: 12px; font-size: 10px; font-weight: 900; z-index: 1000; }
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 2000; justify-content: center; align-items: center; padding: 20px; }
        .modal.active { display: flex; }
        .modal-content { background: white; border-radius: 16px; padding: 24px; max-width: 90%; max-height: 80vh; overflow-y: auto; box-shadow: 0 20px 60px rgba(0,0,0,0.3); position: relative; }
        .modal-title { font-size: 18px; font-weight: 900; color: #1e293b; margin-bottom: 16px; }
        .modal-close { position: absolute; top: 12px; right: 12px; font-size: 24px; cursor: pointer; color: #94a3b8; width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; }
        .modal-close:hover { color: #ef4444; background: #fee2e2; border-radius: 50%; }
        .login-form { max-width: 400px; width: 100%; }
        .login-input { width: 100%; padding: 12px; border: 2px solid #e2e8f0; border-radius: 8px; margin-bottom: 12px; font-size: 14px; }
        .login-btn { width: 100%; padding: 12px; background: #4f46e5; color: white; border: none; border-radius: 8px; font-weight: 700; cursor: pointer; }
        .login-btn:hover { background: #4338ca; }
        @media (max-width: 768px) {
            .calendar-grid { font-size: 10px; }
            .day-cell { min-height: 80px; padding: 4px; }
            .event-item { font-size: 9px; padding: 2px 4px; }
            .notice-input-group { flex-direction: column; }
            .notice-input { width: 100%; min-width: unset; }
            .notice-btn { width: 100%; }
            .modal-content { padding: 16px; max-width: 95%; }
            .year-view { grid-template-columns: 1fr; }
            header h1 { font-size: 16px !important; }
            header button { font-size: 10px !important; padding: 4px 8px !important; }
        }
        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }
        @keyframes spin { to { transform: rotate(360deg); } }
    </style>
</head>
<body class="p-2 md:p-3">
    <div class="max-w-4xl mx-auto">
        <header class="flex justify-between items-center mb-4 md:mb-6 bg-indigo-900 p-3 md:p-4 rounded-2xl text-white shadow-lg">
            <h1 class="font-black text-sm md:text-base">ğŸ« êµ¬ë¡€ì¤‘ í•™ì‚¬ë ¥</h1>
            <div class="flex gap-1 md:gap-2 items-center flex-wrap">
                <button onclick="app.showLoginModal()" class="text-xs bg-indigo-700 px-2 md:px-3 py-1 md:py-1.5 rounded-lg font-bold">ğŸ”</button>
                <button onclick="app.setView('weekly')" class="text-xs bg-indigo-700 px-2 md:px-3 py-1 md:py-1.5 rounded-lg font-bold">ì£¼ê°„</button>
                <button onclick="app.setView('monthly')" class="text-xs bg-indigo-700 px-2 md:px-3 py-1 md:py-1.5 rounded-lg font-bold">ì›”ê°„</button>
                <button onclick="app.setView('yearly')" class="text-xs bg-indigo-700 px-2 md:px-3 py-1 md:py-1.5 rounded-lg font-bold">ì—°ê°„</button>
            </div>
        </header>

        <section class="bg-white p-3 md:p-4 rounded-2xl shadow-sm border mb-4 grid grid-cols-2 md:grid-cols-4 gap-2">
            <input type="date" id="inDate" class="border p-2 rounded-xl text-xs md:text-sm outline-none">
            <input type="text" id="inTitle" placeholder="í–‰ì‚¬ë‚´ìš©" class="border p-2 rounded-xl text-xs md:text-sm outline-none">
            <select id="inDept" class="border p-2 rounded-xl text-xs md:text-sm outline-none">
                <option>êµë¬´</option><option>ì—°êµ¬</option><option>í•™ìƒ</option><option>ì°½ì˜</option><option>í–‰ì •</option>
            </select>
            <button onclick="app.saveEvent()" class="bg-indigo-600 text-white rounded-xl font-bold py-2 text-xs md:text-sm">ì €ì¥</button>
        </section>

        <div class="flex justify-between items-center bg-white p-3 rounded-2xl border mb-4">
            <button onclick="app.move(-1)" class="text-indigo-600 font-bold px-4">â®</button>
            <h2 id="titleText" class="text-base md:text-lg font-black text-slate-700">ë¡œë”© ì¤‘...</h2>
            <button onclick="app.move(1)" class="text-indigo-600 font-bold px-4">â¯</button>
        </div>

        <div id="viewPort"></div>
        <div id="weeklyNotices" style="display:none;"></div>

        <footer class="text-center py-8 text-slate-400 text-[10px]">
            Â© Choi Gwang-cheul, Gurye Middle School
        </footer>
    </div>

    <div id="adminBadge" class="admin-badge" style="display:none;">
        ğŸ” ê´€ë¦¬ì
        <button onclick="app.logout()" style="margin-left:8px; background:#dc2626; padding:2px 6px; border-radius:4px; font-size:9px;">ë¡œê·¸ì•„ì›ƒ</button>
    </div>

    <div id="syncIndicator" class="sync-indicator">
        <span id="syncText">â— ì´ˆê¸°í™” ì¤‘</span>
    </div>

    <div id="loginModal" class="modal">
        <div class="modal-content login-form">
            <span class="modal-close" onclick="app.closeModal('loginModal')">&times;</span>
            <div class="modal-title">ğŸ” ê´€ë¦¬ì ë¡œê·¸ì¸</div>
            <input type="text" id="adminId" class="login-input" placeholder="ì•„ì´ë””" value="admin">
            <input type="password" id="adminPw" class="login-input" placeholder="ë¹„ë°€ë²ˆí˜¸">
            <button class="login-btn" onclick="app.login()">ë¡œê·¸ì¸</button>
            <div id="loginError" style="color:#ef4444; font-size:12px; margin-top:8px; display:none;"></div>
        </div>
    </div>

    <div id="eventModal" class="modal">
        <div class="modal-content" style="max-width:600px;">
            <span class="modal-close" onclick="app.closeModal('eventModal')">&times;</span>
            <div id="eventModalContent"></div>
        </div>
    </div>

    <script>
        const app = {
            API_URL: 'https://script.google.com/macros/s/AKfycbzBzEu_8Xo_EOIcFX48-Lj6k5TehW6gF86fX7zkQszp1qzCX3RsXKfeVCUezVzfnaCx/exec',
            
            events: [],
            notices: {},
            currentDate: new Date(),
            viewMode: 'weekly',
            isEditing: false,
            lastSyncTime: 0,
            isAdmin: false,
            isLoading: false,
            
            holidays: [
                '2026-01-01:ì‹ ì •','2026-02-16:ì„¤ë‚ ì—°íœ´','2026-02-17:ì„¤ë‚ ','2026-02-18:ì„¤ë‚ ì—°íœ´',
                '2026-03-01:ì‚¼ì¼ì ˆ','2026-03-02:ì‚¼ì¼ì ˆ ëŒ€ì²´íœ´ì¼','2026-05-05:ì–´ë¦°ì´ë‚ ',
                '2026-05-24:ë¶€ì²˜ë‹˜ì˜¤ì‹ ë‚ ','2026-05-25:ë¶€ì²˜ë‹˜ì˜¤ì‹ ë‚  ëŒ€ì²´íœ´ì¼','2026-06-06:í˜„ì¶©ì¼',
                '2026-08-15:ê´‘ë³µì ˆ','2026-09-24:ì¶”ì„ì—°íœ´','2026-09-25:ì¶”ì„','2026-09-26:ì¶”ì„ì—°íœ´',
                '2026-10-03:ê°œì²œì ˆ','2026-10-09:í•œê¸€ë‚ ','2026-12-25:í¬ë¦¬ìŠ¤ë§ˆìŠ¤'
            ],
            
            dayNames: ['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† '],
            deptColors: {'êµë¬´': 'dept-êµë¬´','ì—°êµ¬': 'dept-ì—°êµ¬','í•™ìƒ': 'dept-í•™ìƒ','ì°½ì˜': 'dept-ì°½ì˜','í–‰ì •': 'dept-í–‰ì •'},
            
            getHoliday(dateStr) {
                const found = this.holidays.find(h => h.startsWith(dateStr + ':'));
                return found ? found.split(':')[1] : null;
            },
            
            getDayName(date) { return this.dayNames[date.getDay()]; },
            
            setSyncStatus(status, text) {
                const indicator = document.getElementById('syncIndicator');
                const textEl = document.getElementById('syncText');
                if (status === 'loading') {
                    indicator.className = 'sync-indicator syncing';
                    textEl.innerHTML = '<div class="loading-spinner"></div>';
                } else if (status === 'editing') {
                    indicator.className = 'sync-indicator editing';
                    textEl.textContent = 'âœ ì…ë ¥ ì¤‘';
                } else if (status === 'syncing') {
                    indicator.className = 'sync-indicator syncing';
                    textEl.textContent = 'â— ë™ê¸°í™” ì¤‘';
                } else if (status === 'success') {
                    indicator.className = 'sync-indicator';
                    textEl.textContent = text || 'â— ì™„ë£Œ';
                } else if (status === 'error') {
                    indicator.className = 'sync-indicator';
                    indicator.style.background = '#ef4444';
                    textEl.textContent = 'â— ì˜¤ë¥˜';
                }
            },
            
            getWeekKey(date) {
                date = date || this.currentDate;
                const d = new Date(date);
                const day = d.getDay();
                const offset = day === 0 ? -6 : -(day - 1);
                d.setDate(d.getDate() + offset);
                return d.getFullYear() + '-' + String(d.getMonth() + 1).padStart(2, '0') + '-' + String(d.getDate()).padStart(2, '0');
            },
            
            getMondayOfWeek(date) {
                date = date || this.currentDate;
                const d = new Date(date);
                const day = d.getDay();
                const offset = day === 0 ? -6 : -(day - 1);
                d.setDate(d.getDate() + offset);
                return d;
            },
            
            showLoginModal() { document.getElementById('loginModal').classList.add('active'); },
            closeModal(modalId) { document.getElementById(modalId).classList.remove('active'); },
            
            login() {
                const id = document.getElementById('adminId').value;
                const pw = document.getElementById('adminPw').value;
                if (id === 'admin' && pw === '1234') {
                    this.isAdmin = true;
                    document.getElementById('adminBadge').style.display = 'block';
                    this.closeModal('loginModal');
                    alert('ê´€ë¦¬ì ë¡œê·¸ì¸ ì„±ê³µ!');
                    this.render();
                } else {
                    document.getElementById('loginError').textContent = 'ì•„ì´ë”” ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤.';
                    document.getElementById('loginError').style.display = 'block';
                }
            },
            
            logout() {
                if (confirm('ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                    this.isAdmin = false;
                    document.getElementById('adminBadge').style.display = 'none';
                    this.render();
                }
            },
            
            showEventModal(dateStr) {
                const dayEvents = this.events.filter(e => e.date === dateStr);
                const holiday = this.getHoliday(dateStr);
                const date = new Date(dateStr);
                const dayName = this.getDayName(date);
                
                let html = '<div class="modal-title">' + (date.getMonth()+1) + 'ì›” ' + date.getDate() + 'ì¼ (' + dayName + ')</div>';
                if (holiday) html += '<div style="color:#ef4444; font-weight:700; margin-bottom:12px;">ğŸŠ ' + holiday + '</div>';
                
                if (dayEvents.length === 0) {
                    html += '<div style="color:#94a3b8; padding:20px; text-align:center;">ì¼ì •ì´ ì—†ìŠµë‹ˆë‹¤.</div>';
                } else {
                    html += '<div style="margin-top:12px;">';
                    dayEvents.forEach(e => {
                        const deptColorClass = this.deptColors[e.dapt] || 'dept-êµë¬´';
                        html += '<div style="background:#f8fafc; padding:12px; border-radius:8px; margin-bottom:8px; border-left:4px solid #6366f1;">';
                        html += '<div style="font-weight:700; color:#1e293b; margin-bottom:4px;">' + e.title + '</div>';
                        html += '<div style="font-size:12px;"><span class="dept-badge ' + deptColorClass + '">ë‹´ë‹¹: ' + e.dapt + '</span></div>';
                        html += '</div>';
                    });
                    html += '</div>';
                }
                
                document.getElementById('eventModalContent').innerHTML = html;
                document.getElementById('eventModal').classList.add('active');
            },
            
            async saveToServer(action, data) {
                if (this.isLoading) return;
                try {
                    this.isLoading = true;
                    this.setSyncStatus('syncing');
                    console.log('ğŸ’¾ [ì €ì¥]', action);
                    
                    const response = await fetch(this.API_URL, {
                        method: 'POST',
                        body: JSON.stringify({ action: action, ...data })
                    });
                    
                    if (!response.ok) throw new Error('HTTP ' + response.status);
                    const result = await response.json();
                    console.log('âœ… ì‘ë‹µ:', result);
                    if (!result.success) throw new Error(result.error || 'ì €ì¥ ì‹¤íŒ¨');
                    
                    this.setSyncStatus('success', 'ì €ì¥ ì™„ë£Œ');
                    const self = this;
                    setTimeout(async function() {
                        self.isEditing = false;
                        await self.loadFromServer();
                    }, 800);
                    return result;
                } catch (error) {
                    console.error('âŒ ì €ì¥ ì‹¤íŒ¨:', error);
                    this.setSyncStatus('error');
                    alert('ì €ì¥ ì‹¤íŒ¨: ' + error.message);
                    throw error;
                } finally {
                    this.isLoading = false;
                }
            },
            
            async loadFromServer() {
                const now = Date.now();
                if (this.isEditing || this.isLoading || (now - this.lastSyncTime < 1000)) return;
                
                try {
                    this.isLoading = true;
                    this.setSyncStatus('loading');
                    console.log('ğŸ“¥ [ë¡œë“œ]');
                    
                    const response = await fetch(this.API_URL + '?action=load&t=' + Date.now());
                    if (!response.ok) throw new Error('HTTP ' + response.status);
                    
                    const data = await response.json();
                    console.log('âœ… ë°ì´í„°:', data);
                    if (!data.success) throw new Error(data.error || 'ë¡œë“œ ì‹¤íŒ¨');
                    
                    this.events = (data.events || []).map(function(item) {
                        return {
                            id: String(item.id),
                            date: String(item.date).substring(0, 10),
                            title: String(item.title),
                            dapt: String(item.dapt)
                        };
                    });
                    
                    if (data.notices) this.notices = data.notices;
                    
                    this.lastSyncTime = now;
                    this.setSyncStatus('success', 'ë™ê¸°í™” ì™„ë£Œ');
                    this.render();
                } catch (error) {
                    console.error('âŒ ë¡œë“œ ì‹¤íŒ¨:', error);
                    this.setSyncStatus('error');
                    alert('ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨. ìƒˆë¡œê³ ì¹¨ í•´ì£¼ì„¸ìš”.');
                } finally {
                    this.isLoading = false;
                }
            },
            
            async saveEvent() {
                const dateInput = document.getElementById('inDate').value;
                const title = document.getElementById('inTitle').value;
                const dapt = document.getElementById('inDept').value;
                if (!dateInput || !title) { alert('ë‚ ì§œì™€ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”.'); return; }
                
                const newEvent = { id: Date.now().toString(), date: dateInput, title: title, dapt: dapt };
                this.events.push(newEvent);
                this.render();
                await this.saveToServer('addEvent', newEvent);
                document.getElementById('inDate').value = '';
                document.getElementById('inTitle').value = '';
            },
            
            async deleteEvent(id) {
                if (!confirm('ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;
                this.events = this.events.filter(e => e.id !== id);
                this.render();
                await this.saveToServer('deleteEvent', { id: id });
            },
            
            async toggleHoliday(dateStr) {
                if (!this.isAdmin) { this.showEventModal(dateStr); return; }
                const existing = this.events.find(e => e.date === dateStr && e.title === 'íœ´ì—…ì¼');
                if (existing) {
                    if (confirm('íœ´ì—…ì¼ì„ í•´ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) await this.deleteEvent(existing.id);
                } else {
                    if (confirm('íœ´ì—…ì¼ë¡œ ì§€ì •í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                        const newEvent = { id: Date.now().toString(), date: dateStr, title: 'íœ´ì—…ì¼', dapt: 'í•™ì‚¬' };
                        this.events.push(newEvent);
                        this.render();
                        await this.saveToServer('addEvent', newEvent);
                    }
                }
            },
            
            handleNoticeInput(role) {
                const weekKey = this.getWeekKey();
                const input = document.getElementById('notice_' + role);
                if (!input) return;
                const value = input.value;
                if (!this.notices[weekKey]) this.notices[weekKey] = {};
                this.notices[weekKey][role] = value;
                input.classList.remove('has-content');
                if (value.trim()) input.classList.add('has-content');
                this.isEditing = true;
                this.setSyncStatus('editing');
            },
            
            async saveNoticeBtn(role) {
                const weekKey = this.getWeekKey();
                const input = document.getElementById('notice_' + role);
                if (!input) return;
                const value = input.value.trim();
                if (!this.notices[weekKey]) this.notices[weekKey] = {};
                this.notices[weekKey][role] = value;
                try {
                    await this.saveToServer('saveNotice', { weekKey: weekKey, role: role, content: value });
                    if (value) input.classList.add('has-content');
                    alert('ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!');
                } catch (error) {}
            },
            
            async deleteNoticeBtn(role) {
                if (!confirm('ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;
                const weekKey = this.getWeekKey();
                const input = document.getElementById('notice_' + role);
                if (!input) return;
                if (this.notices[weekKey]) delete this.notices[weekKey][role];
                input.value = '';
                input.classList.remove('has-content');
                await this.saveToServer('saveNotice', { weekKey: weekKey, role: role, content: '' });
            },
            
            move(direction) {
                if (this.viewMode === 'yearly') {
                    this.currentDate.setFullYear(this.currentDate.getFullYear() + direction);
                } else if (this.viewMode === 'monthly') {
                    this.currentDate.setMonth(this.currentDate.getMonth() + direction);
                } else {
                    this.currentDate.setDate(this.currentDate.getDate() + (direction * 7));
                }
                this.render();
            },
            
            setView(mode) { this.viewMode = mode; this.render(); },
            
            render() {
                const year = this.currentDate.getFullYear();
                const month = this.currentDate.getMonth() + 1;
                const titleText = document.getElementById('titleText');
                const viewPort = document.getElementById('viewPort');
                const weeklyNotices = document.getElementById('weeklyNotices');
                
                if (this.viewMode === 'yearly') {
                    titleText.textContent = year + 'ë…„ ì „ì²´';
                    viewPort.innerHTML = this.renderYearly();
                    weeklyNotices.style.display = 'none';
                } else if (this.viewMode === 'monthly') {
                    titleText.textContent = year + 'ë…„ ' + month + 'ì›”';
                    viewPort.innerHTML = this.renderMonthly();
                    weeklyNotices.style.display = 'none';
                } else {
                    titleText.textContent = year + 'ë…„ ' + month + 'ì›” ì£¼ê°„';
                    viewPort.innerHTML = this.renderWeekly();
                }
            },
            
            renderYearly() { return '<div class="text-center p-20 text-slate-400">ì—°ê°„ ë·° ì¤€ë¹„ ì¤‘...</div>'; },
            renderMonthly() { return '<div class="text-center p-20 text-slate-400">ì›”ê°„ ë·° ì¤€ë¹„ ì¤‘...</div>'; },
            renderWeekly() { return '<div class="text-center p-20 text-slate-400">ì£¼ê°„ ë·° ì¤€ë¹„ ì¤‘...</div>'; },
            
            async init() {
                console.log('ğŸš€ [ì‹œì‘]');
                console.log('ğŸ“ URL:', this.API_URL);
                await this.loadFromServer();
                this.render();
                const self = this;
                setInterval(function() {
                    if (!self.isEditing && !self.isLoading) self.loadFromServer();
                }, 15000);
            }
        };
        
        window.addEventListener('DOMContentLoaded', function() { app.init(); });
    </script>
</body>
</html>

